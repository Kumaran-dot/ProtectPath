<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live Location Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body style="text-align:center; background:#f0f8ff;">
  <h2>📍 ProtectPath Live Location</h2>
  <iframe id="mapFrame" width="100%" height="500px" style="border:0;" allowfullscreen></iframe>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAt0VhC7KVJ69LkK6xRtyxlXeS6AKXwBsk",
      authDomain: "protectpath-fb9d1.firebaseapp.com",
      databaseURL: "https://protectpath-fb9d1-default-rtdb.firebaseio.com",
      projectId: "protectpath-fb9d1",
      storageBucket: "protectpath-fb9d1.appspot.com",
      messagingSenderId: "233985863378",
      appId: "1:233985863378:web:1cd31dc2ccb207c1cb870b"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function updateMap(lat, lon) {
      const mapUrl = `https://maps.google.com/maps?q=${lat},${lon}&z=15&output=embed`;
      document.getElementById("mapFrame").src = mapUrl;
    }

    db.ref("location").on("value", (snapshot) => {
      const data = snapshot.val();
      if (data && data.latitude && data.longitude) {
        updateMap(data.latitude, data.longitude);
      }
    });
  </script>
</body>
</html>
